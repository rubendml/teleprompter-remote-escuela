<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Teleprompter</title>

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

#text {
  font-size: 64px;
  line-height: 1.4;
  padding: 10vh 8vw;
  white-space: pre-wrap;
  transition: transform 0.3s;
}

.mirror {
  transform: scaleX(-1);
}
</style>
</head>

<body>

<div id="text" class="mirror">
Esperando texto...
</div>

<script>
const socket = new WebSocket("wss://teleprompter-ws-5ziy.onrender.com");

const text = document.getElementById("text");
let speed = 0;
let scrolling = false;
let mirror = true;
let interval = null;

function startScroll() {
  if (interval) clearInterval(interval);
  scrolling = true;
  interval = setInterval(() => {
    window.scrollBy(0, speed);
  }, 30);
}

function stopScroll() {
  scrolling = false;
  if (interval) clearInterval(interval);
}

socket.onmessage = (event) => {
  const data = JSON.parse(event.data);

  if (data.action === "play") startScroll();
  if (data.action === "pause") stopScroll();

  if (data.action === "speed") speed = data.value;

  if (data.action === "up") window.scrollBy(0, -100);
  if (data.action === "down") window.scrollBy(0, 100);

  if (data.action === "font") text.style.fontSize = data.value + "px";

  if (data.action === "text") {
    text.innerText = data.value;
    window.scrollTo(0, 0);
  }

  if (data.action === "mirror") {
    mirror = !mirror;
    text.classList.toggle("mirror", mirror);
  }
};
</script>

</body>
</html>
