<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Teleprompter</title>
<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: Arial, sans-serif;
  overflow: hidden;
}
#text {
  font-size: 64px;
  line-height: 1.4;
  padding: 10vh 8vw;
  white-space: pre-wrap;
}
.mirror {
  transform: scaleX(-1);
}
</style>
</head>
<body>

<div id="text" class="mirror">
EL DÍA EN QUE EL CAFÉ DECIDIÓ VENGARSE

Todo comenzó como comienzan las grandes tragedias modernas: con una alarma que sonó cinco veces… y fue ignorada seis.

Don Ernesto, héroe anónimo de barrio, se levantó de la cama con la elegancia de un saco de papas cayendo por las escaleras. Caminó hasta la cocina con los ojos entrecerrados, convencido de que el mundo era un error que solo el café podía arreglar.

Puso la cafetera, se apoyó en la mesa y esperó.
Esperó mucho.
Esperó tanto… que empezó a sospechar que el café lo había abandonado emocionalmente.

—Tranquilo —se dijo—, no todos los cafés nacen con vocación de servir.

Cuando por fin tomó la primera taza, ocurrió algo extraño. El café estaba… demasiado despierto. No fuerte. No cargado. Despierto. Como si hubiera pasado la noche entrenando crossfit.

A los treinta segundos, Don Ernesto ya había respondido tres correos que no eran suyos, barrido la casa dos veces y organizado mentalmente un viaje a Japón sin saber japonés.

—Esto no es café —murmuró—. Esto es una amenaza.

Decidió salir a trabajar. Se puso los zapatos equivocados, pero como iba tan rápido, no se dio cuenta hasta que llegó a la esquina y uno de ellos empezó a rechinar como si estuviera protestando por el maltrato.

En el bus, el café seguía haciendo de las suyas. Don Ernesto escuchó conversaciones ajenas, las analizó, sacó conclusiones filosóficas y decidió que el señor del asiento de atrás necesitaba cambiar de vida… todo sin que nadie se lo pidiera.

Cuando llegó a la oficina, saludó a todos con una energía sospechosa.

—¡Buenos días! —gritó.

Hubo silencio.

—¿Está bien, Don Ernesto? —preguntó la secretaria, retrocediendo medio paso.

—¡Mejor que nunca! ¡Hoy es un gran día para ser productivos!

La gente se miró entre sí. Nadie confiaba en alguien tan feliz antes de las nueve de la mañana.

A las diez, el café alcanzó su punto máximo. Don Ernesto hablaba tan rápido que sus ideas llegaban antes que sus frases. Propuso cinco proyectos, tres de ellos imposibles y uno que involucraba una cabra, una impresora y una idea que nadie entendió.

A las once, el café se retiró sin avisar.

De golpe, Don Ernesto sintió el vacío. El silencio. El frío.
Miró su taza.

Vacía.

—Volverá —susurró—. Siempre vuelve.

Pero no volvió.

A las doce, Don Ernesto dormía sentado, con los ojos abiertos, sosteniendo un lápiz que ya no recordaba para qué servía.

Desde ese día, Don Ernesto aprendió una lección muy importante:
Nunca subestimes al café.
Porque un día te despierta…
y al otro, te abandona sin explicaciones.

Y desde entonces, cada mañana, cuando la cafetera hace ruido, Don Ernesto la mira con respeto.

Y un poquito de miedo.
</div>

<script>
const socket = new WebSocket("wss://teleprompter-ws-5ziy.onrender.com");

const text = document.getElementById("text");
let speed = 0;
let scrollInterval = null;

function startScroll() {
  stopScroll();
  scrollInterval = setInterval(() => {
    window.scrollBy(0, speed);
  }, 30);
}

function stopScroll() {
  if (scrollInterval) clearInterval(scrollInterval);
}

socket.onmessage = (event) => {
  const data = JSON.parse(event.data);

  if (data.action === "play") startScroll();
  if (data.action === "pause") stopScroll();
  if (data.action === "speed") speed = data.value;
  if (data.action === "up") window.scrollBy(0, -100);
  if (data.action === "down") window.scrollBy(0, 100);
  if (data.action === "font") text.style.fontSize = data.value + "px";
};
</script>

</body>
</html>
